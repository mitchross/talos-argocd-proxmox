apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# kubePrism (localhost:7445) handles control plane HA via Omni's SideroLink
# Only need service LoadBalancer resources for applications

resources:
- ip-pool.yaml
- l2-policy.yaml
# REMOVED: l2-announcement.yaml (duplicate of l2-policy.yaml - was causing ARP conflicts)

helmCharts:
- name: cilium
  repo: https://helm.cilium.io
  version: 1.18.3
  releaseName: cilium
  includeCRDs: true
  namespace: kube-system
  valuesFile: values.yaml

generatorOptions:
  disableNameSuffixHash: true