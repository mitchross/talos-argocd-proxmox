apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# kubePrism (localhost:7445) handles control plane HA via Omni's SideroLink
# Only need service LoadBalancer resources for applications

# NOTE: Apply ip-pool.yaml and l2-policy.yaml AFTER Cilium is running
# These require Cilium CRDs to be installed first

resources: 
 - ip-pool.yaml
 - l2-policy.yaml

helmCharts:
- name: cilium
  repo: https://helm.cilium.io
  version: 1.18.4
  releaseName: cilium
  includeCRDs: true
  namespace: kube-system
  valuesFile: values.yaml

generatorOptions:
  disableNameSuffixHash: true
