apiVersion: external-secrets.io/v1
kind: ClusterExternalSecret
metadata:
  name: volsync-rustfs-base
spec:
  externalSecretName: volsync-rustfs-base
  namespaceSelector:
    matchLabels:
      volsync.backube/privileged-movers: "true"
  refreshTime: "1h"
  externalSecretSpec:
    refreshInterval: "1h"
    secretStoreRef:
      kind: ClusterSecretStore
      name: 1password
    target:
      name: volsync-rustfs-base
      creationPolicy: Owner
    data:
    - secretKey: AWS_ACCESS_KEY_ID
      remoteRef:
        key: rustfs
        property: k8s-admin-access-key
    - secretKey: AWS_SECRET_ACCESS_KEY
      remoteRef:
        key: rustfs
        property: k8s-admin-secret-key
    - secretKey: RESTIC_PASSWORD
      remoteRef:
        key: rustfs
        property: restic_password
    - secretKey: RESTIC_REPOSITORY_BASE
      remoteRef:
        key: rustfs
        property: restic_repository
