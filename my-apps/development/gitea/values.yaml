persistence:
  enabled: true
  size: 2Gi
  storageClass: longhorn
  labels:
    backup: "daily"

service:
  http:
    type: ClusterIP
  ssh:
    type: ClusterIP

gitea:
  config:
    database:
      DB_TYPE: postgres
      HOST: gitea-database-rw.cloudnative-pg.svc.cluster.local:5432
      NAME: gitea
      USER: gitea
      SCHEMA: public
  additionalConfigFromEnvs:
    - name: GITEA__database__PASSWD
      valueFrom:
        secretKeyRef:
          name: gitea-db-secret
          key: password

# Disable bundled databases - using external CNPG
postgresql-ha:
  enabled: false

postgresql:
  enabled: false

# Use single valkey instead of cluster
valkey-cluster:
  enabled: false

valkey:
  enabled: true
  architecture: standalone
  primary:
    persistence:
      size: 1Gi
      storageClass: longhorn
