mqtt:
  host: mosquitto.frigate
  port: 1883
  topic_prefix: frigate
  user: "${FRIGATE_MQTT_USER}"
  password: "${FRIGATE_MQTT_PASSWORD}"
database:
  path: /config/frigate.db
ui:
  timezone: America/New_York
timestamp_style:
  position: "tr"
  format: "%m/%d/%Y %H:%M:%S"
  color:
    red: 255
    green: 255
    blue: 255
snapshots:
  enabled: true
  timestamp: true
  bounding_box: true
  retain:
    default: 14
motion:
  threshold: 45
  contour_area: 20
record:
  enabled: true
  retain:
    days: 3
    mode: all
# Object detection is now disabled by default in 0.16.0+
detect:
  enabled: true
detectors:
  cpu:
    type: cpu
ffmpeg:
  input_args: preset-rtsp-generic
# Use Home Assistant as proxy for Nest cameras
# Home Assistant already has working Nest integration
go2rtc:
  streams:
    # Nest cameras via Home Assistant WebRTC proxy
    backyard-nest:
      - "homeassistant://home-assistant.home-assistant:8123?token=${HA_TOKEN}&camera=camera.backyard_camera"
    garage-inside-nest:
      - "homeassistant://home-assistant.home-assistant:8123?token=${HA_TOKEN}&camera=camera.garage_inside"
    garage-outside-nest:
      - "homeassistant://home-assistant.home-assistant:8123?token=${HA_TOKEN}&camera=camera.garage_camera"
    front-porch-nest:
      - "homeassistant://home-assistant.home-assistant:8123?token=${HA_TOKEN}&camera=camera.front_porch_doorbell"
    living-room-nest:
      - "homeassistant://home-assistant.home-assistant:8123?token=${HA_TOKEN}&camera=camera.living_room_camera"
    kitchen-nest:
      - "homeassistant://home-assistant.home-assistant:8123?token=${HA_TOKEN}&camera=camera.kitchen_camera"
cameras:
  # Keep working shed and driveway cameras
  shed:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://192.168.10.46:8554/shed
          roles:
            - detect
            - record
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5
    live:
      height: 1080
  driveway:
    enabled: true
    ffmpeg:
      inputs:
        - path: rtsp://192.168.10.46:8554/driveway
          roles:
            - detect
            - record
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5
    live:
      height: 1080
  # Add Nest cameras via go2rtc restream
  backyard:
    enabled: true
    ffmpeg:
      input_args: preset-rtsp-restream-low-latency
      output_args:
        record: preset-record-generic-audio-aac
      inputs:
        - path: rtsp://127.0.0.1:8554/backyard-nest?video&audio
          roles:
            - detect
            - record
            - audio
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5
    live:
      height: 1080
    objects:
      track:
        - person
        - dog
        - cat
        - car
  garage-inside:
    enabled: true
    ffmpeg:
      input_args: preset-rtsp-restream-low-latency
      output_args:
        record: preset-record-generic-audio-aac
      inputs:
        - path: rtsp://127.0.0.1:8554/garage-inside-nest?video&audio
          roles:
            - detect
            - record
            - audio
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5
    live:
      height: 1080
    objects:
      track:
        - person
        - car
  garage-outside:
    enabled: true
    ffmpeg:
      input_args: preset-rtsp-restream-low-latency
      output_args:
        record: preset-record-generic-audio-aac
      inputs:
        - path: rtsp://127.0.0.1:8554/garage-outside-nest?video&audio
          roles:
            - detect
            - record
            - audio
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5
    live:
      height: 1080
    objects:
      track:
        - person
        - car
  front-porch:
    enabled: true
    ffmpeg:
      input_args: preset-rtsp-restream-low-latency
      output_args:
        record: preset-record-generic-audio-aac
      inputs:
        - path: rtsp://127.0.0.1:8554/front-porch-nest?video&audio
          roles:
            - detect
            - record
            - audio
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5
    live:
      height: 1080
    objects:
      track:
        - person
        - dog
        - cat
        - car
  living-room:
    enabled: true
    ffmpeg:
      input_args: preset-rtsp-restream-low-latency
      output_args:
        record: preset-record-generic-audio-aac
      inputs:
        - path: rtsp://127.0.0.1:8554/living-room-nest?video&audio
          roles:
            - detect
            - record
            - audio
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5
    live:
      height: 1080
    objects:
      track:
        - person
        - dog
        - cat
  kitchen:
    enabled: true
    ffmpeg:
      input_args: preset-rtsp-restream-low-latency
      output_args:
        record: preset-record-generic-audio-aac
      inputs:
        - path: rtsp://127.0.0.1:8554/kitchen-nest?video&audio
          roles:
            - detect
            - record
            - audio
    detect:
      enabled: true
      width: 1280
      height: 720
      fps: 5
    live:
      height: 1080
    objects:
      track:
        - person
